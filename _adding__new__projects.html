<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dave&#39;s Code: Adding New Projects</title>
<link rel="icon" href="project_icon_32x32.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="project_logo_200x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Dave&#39;s Code<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Dave&#39;s Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_adding__new__projects.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Adding New Projects</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>The information below shows what needs to be setup when adding new projects to the DC.sln file</h1>
<h2>Adding a static lib project</h2>
<pre>
Load up DC.sln in Visual Studio.
Right click on the solution and select Add -&gt; New Project -&gt; Empty Project
Click Next
Create it in the same folder as the DC solution file, for example X:\Projects\c++\2025\DC
Give it a name, followed by Lib, for example MathLib
Click Create.
So that the correct settings are available in the next step, add a .cpp/.hpp file pair to the project, preferably named the same as the project.
In the .hpp, here's a template to use:
</pre> <pre class="fragment">#pragma once
namespace DC
{
    namespace SOMELib
    {
    }
}
</pre><p> And for the .cpp, here's a template to use: </p><pre class="fragment">#include "SOMELib.hpp"
namespace DC
{
    namespace SOMELib
    {
    }
}
</pre><pre>
I don't like the default filters "Header Files" and "Source Files", so after adding the files, I move them out into the root of the project and then delete those two filters.

Right click on the newly added project in the solution explorer and select properties
Make sure the Configuration is set to "All configurations" and change the following...
<pre class="fragment">Configuration Properties -&gt; General -&gt; Output Directory: $(ProjectDir)$(Platform)\$(Configuration)\
Configuration Properties -&gt; General -&gt; Intermediate Directory: $(ProjectDir)$(Platform)\$(Configuration)\intermediate\
Configuration Properties -&gt; General -&gt; Configuration Type: Static Library (.lib)
Configuration Properties -&gt; General -&gt; C++ Language Standard: ISO C++20 Standard (/std:c++20)
Configuration Properties -&gt; General -&gt; C Language Standard: ISO C17 (2018) Standard (/std:c17)
Configuration Properties -&gt; C/C++ -&gt; General -&gt; Multi-processor Compilation: Yes (/MP)
</pre>

If the library depends on other libraries, right click on the project in the solution explorer
and select "Build Dependencies" -&gt; "Project Dependencies" and select the projects that this library depends on.

Also, edit cleanup.bat file in Solution Items/cleanup.bat to remove the SOMELib/x64 directory along with all the others
</pre><h2>Adding an executable project</h2>
<pre>
Library projects should have a example executable project, which should be used to develop and test the library.
It's also useful to show how to use the library hence it's name.
Right click on the solution and select Add -&gt; New Project -&gt; Empty Project
Create it in the same folder as the DC solution file, for example X:\Projects\c++\2025\DC
Give it a name starting with the name of the library that it'll be for, followed by "Example", for example MathLibExample
Click Create.
So that the correct settings are available next, add a .cpp file named WinMain.cpp.
Here's a template to use:
<pre class="fragment">#define WIN32_LEAN_AND_MEAN
#include &lt;Windows.h&gt;
#include "../SOMELib/SOMELib.hpp"
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    return 0;
}

Note that we do not use #pragma comment(lib, "somelib.lib"), we add this to the project settings.
So right click on the newly added project in the solution explorer and select properties
Make sure the Configuration is set to "All configurations" and change the following...
Configuration Properties -&gt; Linker -&gt; Input -&gt; Additional Dependencies: $(ProjectDir)..\SOMELib\$(Platform)\$(Configuration)\SOMELib.lib
</pre>
And just as with when adding a static library, change these aswell...
<pre class="fragment">Configuration Properties -&gt; General -&gt; Output Directory: $(ProjectDir)$(Platform)\$(Configuration)\
Configuration Properties -&gt; General -&gt; Intermediate Directory: $(ProjectDir)$(Platform)\$(Configuration)\intermediate\
Configuration Properties -&gt; General -&gt; Configuration Type: Application (.exe) (This should already be set)
Configuration Properties -&gt; General -&gt; C++ Language Standard: ISO C++20 Standard (/std:c++20)
Configuration Properties -&gt; General -&gt; C Language Standard: ISO C17 (2018) Standard (/std:c17)
Configuration Properties -&gt; Debugging -&gt; Working Directory: $(ProjectDir)..\
Configuration Properties -&gt; C/C++ -&gt; General -&gt; Multi-processor Compilation: Yes (/MP)
Configuration Properties -&gt; Linker -&gt; System -&gt; Sub System: Windows (/SUBSYSTEM:WINDOWS)
Configuration Properties -&gt; Manifest Tool -&gt; Input and Output -&gt; DPI Awareness: High DPI Aware
</pre>

For debug and release builds, one at a time, change...
Configuration Properties -&gt; C/C++ -&gt; Preprocessor -&gt; Preprocessor Definitions from _CONSOLE to _WINDOWS

As the executable depends on a library, right click on the project in the solution explorer
and select "Build Dependencies" -&gt; "Project Dependencies" and select the projects that this library depends on.
</pre><h2>Setting up Visual studio to copy the release executables to the root directory.</h2>
<pre class="fragment">To do this...
Right click on the example project in the solution browser and select properties
Make sure release build is set for "Configuration"
Goto Build Events -&gt; Post-Build Event -&gt; Command Line: xcopy "$(OutDir)$(TargetName)$(TargetExt)" "$(ProjectDir)..\" /Y
</pre><h2>Win 32 bit builds</h2>
<pre>
If we go upto Visual studio's "Build" menu and select "Batch Build" to build everything, when adding projects, there are
32 bit builds which we don't want or need, so we have to remove them.
To do so...
Select Build/Configuration Manager
For "Active solution Configuration", select the debug option (There's no need to select for release as what we do below, removes the win32 stuff for both)
For "Active solution platform", select "edit", select the "x86" platform and select "remove" and then close that first window.
Now, for each project, in the "platform" column, click it, then "edit" and remove the "Win32"
Done. Now when we goto the Menu/Build/Batch build, only the x64 platform remains.
When adding a new project, we have to repeat the above for the newly added project.
</pre><h2>Working directory and the /Data dir</h2>
<pre>
As shown above, the working directory is set to the parent directory of the project's dir, which is also the root dir.
In the root dir, we have a Data folder which all executables (if needed), load their data files from.
Here is a small example of the Data dir's contents...
/Data/SomeAppExample/   // Data files specific and exclusively used by "SomeAppExample"
/Data/Shared/           // Data files which are used across many applications.
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
